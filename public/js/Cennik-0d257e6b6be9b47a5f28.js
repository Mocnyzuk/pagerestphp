(window.webpackJsonp=window.webpackJsonp||[]).push([[2],{49:function(t,e,n){},55:function(t,e,n){"use strict";var i=n(49);n.n(i).a},58:function(t,e,n){"use strict";var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.content?n("v-container",[t._l(t.content.cennik,(function(e,i,a){return n("div",{key:a,staticClass:"table"},[n("h2",[t._v(t._s(i))]),t._v(" "),n("v-simple-table",{scopedSlots:t._u([{key:"default",fn:function(){return[n("thead",{staticClass:"secondary lighten-3"},[n("td",[n("h3",[t._v("\n              Nazwa zabiegu\n            ")])]),t._v(" "),n("td",[n("h3",[t._v("Cena zabiegu")])]),t._v(" "),n("td",[n("h3",[t._v("Cena zabiegu w serii")])]),t._v(" "),n("td",[t.editable?n("h3",[t._v("asda")]):t._e()])]),t._v(" "),n("tbody",[t._l(e,(function(e,i){return n("tr",{key:i,staticClass:"table__row"},[n("td",[e.zabieg?n("router-link",{attrs:{to:e.zabieg.urlPath}},[t._v(t._s(e.name))]):n("p",[t._v(t._s(e.name))])],1),t._v(" "),n("td",[n("div",{attrs:{contenteditable:t.admin&&t.editable},on:{blur:function(n){return t.updatePrice(n,e,"priceOnce")}}},[t._v("\n                "+t._s(e.priceOnce||"")+"\n              ")])]),t._v(" "),n("td",[n("div",{attrs:{contenteditable:t.admin&&t.editable},on:{blur:function(n){return t.updatePrice(n,e,"priceSeries")}}},[t._v("\n                "+t._s(e.priceSeries||"")+"\n              ")])]),t._v(" "),t.editable&&t.admin?n("td",[n("treatment-picker",{attrs:{items:t.availableTreatments,ph:null===e.zabieg?"brak":e.zabieg.name},on:{input:function(n){return t.handleChange(n,e)}}})],1):t._e()])})),t._v(" "),t.editable&&t.admin?n("tr",[n("td",[n("v-text-field")],1),t._v(" "),n("td",[n("v-text-field")],1),t._v(" "),n("td",[n("v-text-field")],1)]):t._e()],2)]},proxy:!0}],null,!0)})],1)})),t._v(" "),t.admin&&t.editable?n("v-btn",{staticClass:"primary",on:{click:t.savePriceList}},[t._v("Zapisz")]):t._e()],2):t._e()};i._withStripped=!0;var a={data:()=>({content:null}),methods:{fetchData(t){return t&&"string"==typeof t?this.$http({method:"get",url:t,headers:{"Content-Type":"application/json"}}).then(({data:t})=>{this.content=t}):Promise.reject("invalid url")}}},r=function(){var t=this.$createElement;return(this._self._c||t)("v-select",{staticClass:"mt-2",attrs:{items:this.items,dense:"",outlined:"",placeholder:this.ph},on:{change:this.asd}})};r._withStripped=!0;var s={props:["items","ph"],data:()=>({selected:""}),methods:{asd(t){this.$emit("input",t)}}},l=n(0),c=Object(l.a)(s,r,[],!1,null,null,null);c.options.__file="client/src/components/treatment-picker.vue";var o=c.exports,d={props:{editable:{type:Boolean,default:!1}},mixins:[a],components:{treatmentPicker:o},data:()=>({treatmentList:[]}),computed:{admin(){return this.$store.getters["auth/getRole"]("ROLE_ADMIN")},availableTreatments(){let t=this.treatmentList.map(t=>({text:t.name,value:t.urlPath}));return t=t.filter(t=>!this.allTreatments.find(e=>t.text===e.text)),[{text:"brak",value:null},...t]},allTreatments(){const t=this.content.cennik,e=[];for(let n in t)t[n].forEach(t=>{t.zabieg&&e.push({text:t.zabieg.name})});return e}},mounted(){this.$eventBus.$on("update-priceList",this.fetchTreatments),this.fetchData("/api/cennik").catch(t=>console.error(t)),this.fetchTreatments()},methods:{updatePrice(t,e,n){const i=t.target.innerText;e[n]=i},handleChange(t,e){e.zabieg=t?{urlPath:t}:null},savePriceList(){this.$http({method:"post",url:"/api/admin/cennik",headers:{"Content-type":"application/json"},data:this.content.cennik}).catch(t=>console.error(t))},fetchTreatments(){this.$http({method:"get",url:"/api/admin/zabieg"}).then(({data:t})=>{this.treatmentList=t})}}},u=(n(55),Object(l.a)(d,i,[],!1,null,"3247bd9a",null));u.options.__file="client/src/components/price-list.vue";e.a=u.exports},70:function(t,e,n){"use strict";n.r(e);var i=function(){var t=this.$createElement,e=this._self._c||t;return e("main",[e("price-list")],1)};i._withStripped=!0;var a={title:"Cennik",components:{priceList:n(58).a}},r=n(0),s=Object(r.a)(a,i,[],!1,null,null,null);s.options.__file="client/src/views/Cennik.vue";e.default=s.exports}}]);